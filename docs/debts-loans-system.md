# ูุธุงู ุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุฑูุถ - Decision OS

## ุงูุชุงุฑูุฎ: 2026-01-01
## ุงูุญุงูุฉ: ููุชูู โ

---

## ูุธุฑุฉ ุนุงูุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุฑูุถ ูู Decision OS Dashboard. ุงููุธุงู ูุชูุญ ุชุชุจุน:
- **ุงูุฏููู ุนูู (Payable)**: ุงููุจุงูุบ ุงูุชู ูุฌุจ ุนููู ุฏูุนูุง ููุขุฎุฑูู
- **ุงูุฏููู ูู (Receivable)**: ุงููุจุงูุบ ุงููุณุชุญูุฉ ูู ูู ุงูุขุฎุฑูู

---

## ุงููุฒุงูุง ุงูุฃุณุงุณูุฉ

### 1. ุฅุฏุงุฑุฉ ุงูุฏููู
- ุฅุถุงูุฉ ุฏููู ุฌุฏูุฏุฉ (ุนูู ุฃู ูู)
- ุชุญุฏูุฏ ุงูุทุฑู ุงูุขุฎุฑ (ุงุณูุ ุฑูู ุชูุงุตู)
- ุฑุจุท ุงูุฏูู ุจุญุณุงุจ ูุงูู ูุนูู
- ุฅุถุงูุฉ ุฑูู ูุฑุฌุนู (ุนูุฏุ ูุงุชูุฑุฉ)
- ุชุญุฏูุฏ ูุณุจุฉ ูุงุฆุฏุฉ (ุฅู ูุฌุฏุช)

### 2. ุฌุฏูู ุงูุฏูุนุงุช (Payment Schedule)
ุงููุธุงู ูุฏุนู ุฃููุงุท ุฏูุน ูุชุนุฏุฏุฉ:
- **ุฏูุนุฉ ูุงุญุฏุฉ (One Time)**: ุงููุจูุบ ูุงูู
- **ุฃุณุจูุนู (Weekly)**: ูู ุฃุณุจูุน
- **ูุตู ุดูุฑู (Biweekly)**: ูู ุฃุณุจูุนูู
- **ุดูุฑู (Monthly)**: ูู ุดูุฑ
- **ุฑุจุน ุณููู (Quarterly)**: ูู 3 ุฃุดูุฑ
- **ุณููู (Yearly)**: ูู ุณูุฉ

ูุชู ุชูููุฏ ุงูุฌุฏูู ุชููุงุฆูุงู ุญุณุจ:
- ุชูุฑุงุฑ ุงูุฏูุน
- ุนุฏุฏ ุงูุฃูุณุงุท
- ุชุงุฑูุฎ ุงูุจุฏุงูุฉ

### 3. ุชุชุจุน ุงูุฏูุนุงุช
- ุนุฑุถ ุฌุฏูู ุงูุฏูุนุงุช ูุน ุชูุงุฑูุฎ ุงูุงุณุชุญูุงู
- ุชุณุฌูู ุฏูุนุฉ ุนูุฏ ุงูุณุฏุงุฏ
- ุฑุจุท ุงูุฏูุนุฉ ุจุญุณุงุจ ูุงูู
- ุชุญุฏูุซ ุฑุตูุฏ ุงูุญุณุงุจ ุชููุงุฆูุงู
- ุญุงูุงุช ุงูุฏูุนุงุช: ูุนููุ ูุฏููุนุ ูุชุฃุฎุฑ

### 4. ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ
- ุฅุฌูุงูู ุงูุฏููู ุนูู
- ุฅุฌูุงูู ุงูุฏููู ูู
- ุงููููู ุงูุตุงูู (Net Position)
- ุนุฏุฏ ุงูุฏููู ุงููุชุฃุฎุฑุฉ
- ุงูุฏููู ูุฑูุจุฉ ุงูุงุณุชุญูุงู (ุฎูุงู 7 ุฃูุงู)

### 5. ุงูุชูุจููุงุช
- ุชูุจูู ุจุงูุฏููู ุงููุชุฃุฎุฑุฉ
- ุชูุจูู ุจุงูุฏููู ูุฑูุจุฉ ุงูุงุณุชุญูุงู
- ุชูููู ุงูุตููู ุงููุชุฃุฎุฑุฉ ูู ุงูุฌุฏูู

---

## ุงูุจููุฉ ุงูุชูููุฉ

### ูุงุนุฏุฉ ุงูุจูุงูุงุช

#### ุฌุฏูู `debts`
```sql
- id
- user_id (FK)
- account_id (FK, nullable)
- type (payable/receivable)
- party_name
- party_contact
- total_amount
- paid_amount
- remaining_amount
- start_date
- due_date
- status (active/partially_paid/fully_paid/overdue)
- currency
- interest_rate
- notes
- reference_number
- repayment_frequency
- installments_count
```

#### ุฌุฏูู `debt_payments`
```sql
- id
- debt_id (FK)
- account_id (FK, nullable)
- amount
- payment_date
- due_date
- status (pending/paid/overdue/skipped)
- payment_method
- notes
- reference_number
```

### ุงููููุงุช ุงููููุดุฃุฉ

#### 1. Migrations
- `2026_01_01_000010_create_debts_table.php`
- `2026_01_01_000011_create_debt_payments_table.php`

#### 2. Models
- `app/Models/Debt.php` - ููุฏูู ุงูุฏูู ุงูุฑุฆูุณู
- `app/Models/DebtPayment.php` - ููุฏูู ุงูุฏูุนุงุช

#### 3. Controllers
- `app/Http/Controllers/DebtController.php` - 8 ุฏูุงู (index, create, store, show, edit, update, destroy, recordPayment)

#### 4. Policies
- `app/Policies/DebtPolicy.php` - ุงูุชุญูู ูู ุตูุงุญูุงุช ุงููุณุชุฎุฏู

#### 5. Views
- `resources/views/decision-os/debts/index.blade.php` - ูุงุฆูุฉ ุงูุฏููู
- `resources/views/decision-os/debts/create.blade.php` - ุฅุถุงูุฉ ุฏูู ุฌุฏูุฏ
- `resources/views/decision-os/debts/show.blade.php` - ุชูุงุตูู ุงูุฏูู ูุฌุฏูู ุงูุฏูุนุงุช
- `resources/views/decision-os/debts/edit.blade.php` - ุชุนุฏูู ุงูุฏูู

#### 6. Routes
```php
Route::get('/debts', [DebtController::class, 'index'])->name('debts.index');
Route::get('/debts/create', [DebtController::class, 'create'])->name('debts.create');
Route::post('/debts', [DebtController::class, 'store'])->name('debts.store');
Route::get('/debts/{debt}', [DebtController::class, 'show'])->name('debts.show');
Route::get('/debts/{debt}/edit', [DebtController::class, 'edit'])->name('debts.edit');
Route::put('/debts/{debt}', [DebtController::class, 'update'])->name('debts.update');
Route::delete('/debts/{debt}', [DebtController::class, 'destroy'])->name('debts.destroy');
Route::post('/debts/{debt}/payment', [DebtController::class, 'recordPayment'])->name('debts.record-payment');
```

#### 7. Translations

ุชูุช ุฅุถุงูุฉ 100+ ููุชุงุญ ุชุฑุฌูุฉ ูู:
- `lang/ar/app.php` (ุงูุนุฑุจูุฉ)
- `lang/en/app.php` (ุงูุฅูุฌููุฒูุฉ)

ุงููุณู: `app.debts.*`

---

## ุงูููุทู ุงูุจุฑูุฌู ุงูููู

### 1. ุชูููุฏ ุฌุฏูู ุงูุฏูุนุงุช ุงูุชููุงุฆู

```php
public function generatePaymentSchedule(): void
{
    // ุญุฐู ุงูุฌุฏูู ุงููุฏูู
    $this->payments()->where('status', 'pending')->delete();
    
    // ุญุณุงุจ ูุจูุบ ุงููุณุท
    $installmentAmount = $this->total_amount / $this->installments_count;
    
    // ุชูููุฏ ุงูุฏูุนุงุช ุญุณุจ ุงูุชูุฑุงุฑ
    for ($i = 1; $i <= $this->installments_count; $i++) {
        // ุญุณุงุจ ุชุงุฑูุฎ ุงูุงุณุชุญูุงู
        $dueDate = match ($this->repayment_frequency) {
            'weekly' => $currentDate->addWeek(),
            'biweekly' => $currentDate->addWeeks(2),
            'monthly' => $currentDate->addMonth(),
            // ...
        };
        
        DebtPayment::create([...]);
    }
}
```

### 2. ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูู ุชููุงุฆูุงู

```php
public function updateStatus(): void
{
    // ุฌูุน ุงููุจุงูุบ ุงููุฏููุนุฉ
    $this->paid_amount = $this->payments()->where('status', 'paid')->sum('amount');
    $this->remaining_amount = $this->total_amount - $this->paid_amount;
    
    // ุชุญุฏูุซ ุงูุญุงูุฉ
    if ($this->remaining_amount <= 0) {
        $this->status = 'fully_paid';
    } elseif ($this->paid_amount > 0) {
        $this->status = 'partially_paid';
    } elseif ($this->isOverdue()) {
        $this->status = 'overdue';
    }
    
    $this->save();
}
```

### 3. ุชุณุฌูู ุฏูุนุฉ ูุชุญุฏูุซ ุฑุตูุฏ ุงูุญุณุงุจ

```php
public function markAsPaid(?int $accountId = null): void
{
    $this->status = 'paid';
    $this->payment_date = now();
    
    if ($accountId && $account = Account::find($accountId)) {
        // ุฅุฐุง ุงูุฏูู ุนูู โ ุฃุทุฑุญ ูู ุงูุญุณุงุจ
        // ุฅุฐุง ุงูุฏูู ูู โ ุฃุถูู ููุญุณุงุจ
        $type = $this->debt->type === 'payable' ? 'expense' : 'income';
        $account->updateBalance($this->amount, $type);
    }
    
    $this->save();
    $this->debt->updateStatus(); // ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูู
}
```

---

## ุณููุงุฑูููุงุช ุงูุงุณุชุฎุฏุงู

### ุณููุงุฑูู 1: ูุฑุถ ูู ุงูุจูู
1. ุฅุถุงูุฉ ุฏูู ุฌุฏูุฏ (ููุน: payable - ุนูู)
2. ุงุณู ุงูุทุฑู: "ุจูู ุงูุฅูุงุฑุงุช"
3. ุงููุจูุบ: 100,000 AED
4. ุงูุชูุฑุงุฑ: ุดูุฑูุ 60 ูุณุท (5 ุณููุงุช)
5. ุงููุธุงู ูููุฏ 60 ุฏูุนุฉ ุชููุงุฆูุงู
6. ูู ุดูุฑ: ุชุณุฌูู ุงูุฏูุนุฉ โ ุฎุตู ูู ุงูุญุณุงุจ ุงููุฑุชุจุท

### ุณููุงุฑูู 2: ุฏูู ุดุฎุตู ูู
1. ุฅุถุงูุฉ ุฏูู ุฌุฏูุฏ (ููุน: receivable - ูู)
2. ุงุณู ุงูุทุฑู: "ุฃุญูุฏ"
3. ุงููุจูุบ: 5,000 AED
4. ุงูุชูุฑุงุฑ: one_time
5. ุนูุฏ ุงูุงุณุชูุงู: ุชุณุฌูู ุงูุฏูุนุฉ โ ุฅุถุงูุฉ ููุญุณุงุจ

### ุณููุงุฑูู 3: ูุฑุถ ุจุฃูุณุงุท ุฃุณุจูุนูุฉ
1. ุฅุถุงูุฉ ุฏูู (payable)
2. ุงูุชูุฑุงุฑ: weekly
3. ุนุฏุฏ ุงูุฃูุณุงุท: 10
4. ุงููุธุงู ูุญุณุจ ุชูุงุฑูุฎ ุงูุงุณุชุญูุงู ุชููุงุฆูุงู (ูู 7 ุฃูุงู)

---

## ุงูุชูุงูู ูุน ุงููุธุงู ุงููุงูู

### ุงูุฑุจุท ูุน ุงูุญุณุงุจุงุช ุงููุงููุฉ
- ูู ุฏูู ูููู ุฑุจุทู ุจุญุณุงุจ ูุงูู ูุนูู
- ุนูุฏ ุชุณุฌูู ุฏูุนุฉ:
  - ุฅุฐุง ูุงู ุงูุฏูู "ุนูู" โ ูุชู ุฎุตู ุงููุจูุบ ูู ุงูุญุณุงุจ
  - ุฅุฐุง ูุงู ุงูุฏูู "ูู" โ ูุชู ุฅุถุงูุฉ ุงููุจูุบ ููุญุณุงุจ
- ูุชู ุงุณุชุฎุฏุงู ุฏุงูุฉ `updateBalance()` ูู Account model

### ุงูุชูุงุฑูุฑ ุงููุงููุฉ
ูููู ุฏูุฌ ุจูุงูุงุช ุงูุฏููู ูู ุงูุชูุงุฑูุฑ ุงููุงููุฉ:
- ุงูุฏููู ุนูู โ ุงูุชุฒุงูุงุช (Liabilities)
- ุงูุฏููู ูู โ ุฃุตูู (Assets)
- ุงููููู ุงูุตุงูู โ ุฌุฒุก ูู ุตุงูู ุงูุซุฑูุฉ (Net Worth)

---

## ูุงุฌูุฉ ุงููุณุชุฎุฏู

### ุตูุญุฉ ุงููุงุฆูุฉ (index)
- 4 ุจุทุงูุงุช ุฅุญุตุงุฆูุฉ (Stats Cards)
- ุชุจููุจุงุช: ุงูููุ ุนููุ ูู
- ุชูุจูู ููุฏููู ูุฑูุจุฉ ุงูุงุณุชุญูุงู
- ุฌุฏูู ุจุฌููุน ุงูุฏููู ูุน ุงูุญุงูุงุช ูุงููุจุงูุบ
- ุฒุฑ ุฅุถุงูุฉ (dropdown: ุนูู ุฃู ูู)

### ุตูุญุฉ ุงูุชูุงุตูู (show)
- **ุงูุนููุฏ ุงูุฃูุณุฑ**: ููุฎุต ุงูุฏูู
  - ููุน ุงูุฏูู (badge)
  - ุงุณู ุงูุทุฑู
  - Progress bar ูููุจูุบ ุงููุฏููุน
  - ูู ุงูุชูุงุตูู
  - ุฃุฒุฑุงุฑ ุชุนุฏูู ูุญุฐู
  
- **ุงูุนููุฏ ุงูุฃููู**: ุฌุฏูู ุงูุฏูุนุงุช
  - ูู ุฏูุนุฉ ูุน ุชุงุฑูุฎ ุงุณุชุญูุงููุง
  - ุญุงูุฉ ุงูุฏูุนุฉ
  - ุฒุฑ "ุชุญุฏูุฏ ููุฏููุน" ููุฏูุนุงุช ุงููุนููุฉ
  - Modal ูุชุณุฌูู ุงูุฏูุนุฉ (ุงุฎุชูุงุฑ ุญุณุงุจุ ุทุฑููุฉ ุฏูุนุ ููุงุญุธุงุช)

### ุตูุญุฉ ุงูุฅุถุงูุฉ (create)
- ูููุฐุฌ ุดุงูู ูุน ุฌููุน ุงูุญููู
- ุงุฎุชูุงุฑ ููุน ุงูุฏูู (URL parameter)
- JavaScript ูุฅุฎูุงุก ุญูู "ุนุฏุฏ ุงูุฃูุณุงุท" ุนูุฏ ุงุฎุชูุงุฑ "ุฏูุนุฉ ูุงุญุฏุฉ"

### ุตูุญุฉ ุงูุชุนุฏูู (edit)
- ูููุฐุฌ ูุจุณุท (ูุง ูููู ุชุบููุฑ ุงููุจูุบ ุฃู ุงูุชูุฑุงุฑ)
- ููุท: ุงุณู ุงูุทุฑูุ ุชุงุฑูุฎ ุงูุงุณุชุญูุงูุ ุงูุญุณุงุจุ ุงููุงุฆุฏุฉุ ุงูููุงุญุธุงุช

---

## ุงูููุฒุงุช ุงูุฅุถุงููุฉ

### 1. ุงูุชุญูู ูู ุงูุตูุงุญูุงุช
- Policy ููุชุฃูุฏ ุฃู ุงููุณุชุฎุฏู ูููู ุงูุฏูู
- Authorization ูู ูู controller method

### 2. Events & Observers
- ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูู ุชููุงุฆูุงู ุนูุฏ:
  - ุฅูุดุงุก ุฏูุนุฉ ุฌุฏูุฏุฉ
  - ุชุนุฏูู ุฏูุนุฉ
  - ุญุฐู ุฏูุนุฉ

### 3. Helper Methods
ูู Debt Model:
- `isOverdue()` - ูู ุงูุฏูู ูุชุฃุฎุฑุ
- `getTotalPayable()` - ุฅุฌูุงูู ุงูุฏููู ุนูู
- `getTotalReceivable()` - ุฅุฌูุงูู ุงูุฏููู ูู
- `getOverdueCount()` - ุนุฏุฏ ุงูุฏููู ุงููุชุฃุฎุฑุฉ
- `getDueSoon()` - ุงูุฏููู ูุฑูุจุฉ ุงูุงุณุชุญูุงู

---

## ุงูุชุญุฏูุซุงุช ุงููุทููุจุฉ ูุณุชูุจูุงู

### ุงุญุชูุงูุงุช ุงูุชุทููุฑ:
1. **ุชูุงุฑูุฑ ูุชูุฏูุฉ**:
   - ุฑุณูู ุจูุงููุฉ ูุชูุฒูุน ุงูุฏููู
   - ุชุงุฑูุฎ ุงูุฏููู ุงููุฏููุนุฉ
   - ุชููุน ุงูุชุฏููุงุช ุงูููุฏูุฉ ุงููุณุชูุจููุฉ

2. **ุชุฐููุฑุงุช**:
   - ุฅุดุนุงุฑุงุช ูุจู ููุนุฏ ุงูุงุณุชุญูุงู
   - ุชุฐููุฑ ุจุงูุฏููู ุงููุชุฃุฎุฑุฉ
   - ุฅุฑุณุงู ุจุฑูุฏ ุฅููุชุฑููู ุฃู SMS

3. **ุชุตุฏูุฑ ุงูุจูุงูุงุช**:
   - ุชุตุฏูุฑ ุฌุฏูู ุงูุฏูุนุงุช ุฅูู PDF
   - ุทุจุงุนุฉ ุฅูุตุงูุงุช ุงูุฏูุน

4. **ุชูุงูู ูุญุงุณุจู**:
   - ุฑุจุท ูุน ุฃูุธูุฉ ุงููุญุงุณุจุฉ
   - ุชูููุฏ ูููุฏ ููููุฉ ุชููุงุฆูุฉ

5. **ุฅุฏุงุฑุฉ ูุชูุฏูุฉ**:
   - ุฅุนุงุฏุฉ ุฌุฏููุฉ ุงูุฏููู
   - ุฏูุฌ ุฏููู ูุชุนุฏุฏุฉ
   - ุชุณููุฉ ุงูุฏููู ุงููุชุจุงุฏูุฉ

---

## ุงูุงุฎุชุจุงุฑ

### ุฎุทูุงุช ุงูุงุฎุชุจุงุฑ:
1. โ ุฅุถุงูุฉ ุฏูู "ุนูู" ุจุฏูุนุฉ ูุงุญุฏุฉ
2. โ ุฅุถุงูุฉ ุฏูู "ูู" ุจุฃูุณุงุท ุดูุฑูุฉ
3. โ ุชูููุฏ ุฌุฏูู ุงูุฏูุนุงุช ุชููุงุฆูุงู
4. โ ุชุณุฌูู ุฏูุนุฉ ูุน ุฑุจุทูุง ุจุญุณุงุจ
5. โ ุงูุชุญูู ูู ุชุญุฏูุซ ุฑุตูุฏ ุงูุญุณุงุจ
6. โ ุงูุชุญูู ูู ุชุญุฏูุซ ุญุงูุฉ ุงูุฏูู
7. โ ุนุฑุถ ุงูุฏููู ุงููุชุฃุฎุฑุฉ
8. โ ุนุฑุถ ุงูุฏููู ูุฑูุจุฉ ุงูุงุณุชุญูุงู

---

## ุงูุฎูุงุตุฉ

ุชู ุฅูุดุงุก ูุธุงู ูุชูุงูู ูุฅุฏุงุฑุฉ ุงูุฏููู ูุงููุฑูุถ ูู Decision OS ูุน:
- โ 2 ุฌุฏุงูู ูู ูุงุนุฏุฉ ุงูุจูุงูุงุช
- โ 2 Models ูุน Events
- โ Controller ูุงูู (8 methods)
- โ Policy ููุตูุงุญูุงุช
- โ 4 Views (index, create, show, edit)
- โ 8 Routes
- โ 100+ ุชุฑุฌูุฉ (ุนุฑุจู + ุฅูุฌููุฒู)
- โ ุชูุงูู ูุน ูุธุงู ุงูุญุณุงุจุงุช ุงููุงููุฉ
- โ ุฌุฏูู ุฏูุนุงุช ุชููุงุฆู
- โ ุชุญุฏูุซ ุชููุงุฆู ููุญุงูุงุช ูุงูุฃุฑุตุฏุฉ

ุงููุธุงู ุฌุงูุฒ ููุงุณุชุฎุฏุงู ุงูููุฑู! ๐
